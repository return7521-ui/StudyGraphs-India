<!DOCTYPE html>
<html lang="en" class="antialiased">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>StudyGraphs India | The Universal Math Engine</title>
    
    <meta name="description" content="The ultimate mathematical visualization engine. Features Graphing, Matrix Calculus, Vector Physics, and a Universal Formula Database. Built by Shashank Kushwaha.">
    <meta name="author" content="Shashank Kushwaha">
    <meta name="theme-color" content="#000000">

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@200;400;600;800&family=JetBrains+Mono:wght@300;500&family=Orbitron:wght@500;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                        cyber: ['Orbitron', 'sans-serif'],
                    },
                    colors: {
                        void: '#050505',
                        nebula: '#0f172a',
                        accent: {
                            cyan: '#00f3ff',
                            magenta: '#ff00aa',
                            gold: '#ffd700',
                            plasma: '#bc13fe'
                        }
                    },
                    animation: {
                        'scanline': 'scanline 8s linear infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        scanline: {
                            '0%': { transform: 'translateY(-100%)' },
                            '100%': { transform: 'translateY(100%)' }
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* === COSMIC UI SYSTEM === */
        :root { --glass-border: rgba(255, 255, 255, 0.08); }
        
        body { 
            background-color: #050505; 
            color: #ffffff; 
            overflow: hidden; 
            -webkit-tap-highlight-color: transparent;
        }

        /* Glassmorphism Panel */
        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
        }

        /* Neon Glow Effects */
        .glow-text { text-shadow: 0 0 10px rgba(0, 243, 255, 0.5); }
        .glow-border:hover { 
            border-color: rgba(0, 243, 255, 0.5); 
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.2);
        }

        /* Custom Scrollbars */
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 2px; }
        ::-webkit-scrollbar-thumb:hover { background: #00f3ff; }

        /* Background Canvas */
        #starfield { position: fixed; inset: 0; z-index: 0; pointer-events: none; }
        #app-mount { position: relative; z-index: 10; height: 100vh; }
        
        /* Utility */
        .center-abs { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
    </style>
</head>
<body>
    <canvas id="starfield"></canvas>
    <div id="app-mount"></div>

        <script type="text/babel">
        /**
         * STUDYGRAPHS INDIA - THE UNIVERSAL BUILD
         * Architect: Shashank Kushwaha
         */

        // --- DATA: THE KNOWLEDGE NEXUS ---
        // A structured database of mathematical reality.
        const UNIVERSAL_DATABASE = {
            algebra: [
                { id: 'a1', name: 'Linear', eq: 'mx + c', latex: 'y = mx + c', tags: ['line', 'slope'] },
                { id: 'a2', name: 'Quadratic', eq: 'ax^2 + bx + c', latex: 'y = ax^2 + bx + c', tags: ['parabola', 'roots'] },
                { id: 'a3', name: 'Cubic', eq: 'x^3 - x', latex: 'y = x^3 - x', tags: ['curve'] },
                { id: 'a4', name: 'Exponential', eq: 'e^x', latex: 'y = e^x', tags: ['growth'] },
                { id: 'a5', name: 'Logarithmic', eq: 'log(x)', latex: 'y = \\ln(x)', tags: ['decay'] },
                { id: 'a6', name: 'Absolute Value', eq: 'abs(x)', latex: 'y = |x|', tags: ['modulus'] }
            ],
            trigonometry: [
                { id: 't1', name: 'Sine Wave', eq: 'sin(x)', latex: 'y = \\sin(x)', tags: ['wave', 'periodic'] },
                { id: 't2', name: 'Cosine Wave', eq: 'cos(x)', latex: 'y = \\cos(x)', tags: ['wave'] },
                { id: 't3', name: 'Tangent', eq: 'tan(x)', latex: 'y = \\tan(x)', tags: ['asymptote'] },
                { id: 't4', name: 'Damped Oscillation', eq: 'e^{-0.1x} * sin(x)', latex: 'y = e^{-0.1x}\\sin(x)', tags: ['physics'] },
                { id: 't5', name: 'Beat Frequency', eq: 'sin(10x) + sin(11x)', latex: 'y = \\sin(10x) + \\sin(11x)', tags: ['sound'] }
            ],
            calculus: [
                { id: 'c1', name: 'Gaussian (Normal)', eq: 'e^{-x^2}', latex: 'y = e^{-x^2}', tags: ['statistics', 'bell curve'] },
                { id: 'c2', name: 'Sigmoid', eq: '1 / (1 + e^{-x})', latex: 'y = \\frac{1}{1+e^{-x}}', tags: ['neural networks'] },
                { id: 'c3', name: 'Hyperbolic Sine', eq: 'sinh(x)', latex: 'y = \\sinh(x)', tags: ['hyperbolic'] }
            ],
            geometry3D: [
                { id: 'g1', name: 'Sphere', eq: 'sqrt(16 - x^2 - y^2)', latex: 'x^2+y^2+z^2 = r^2', type: 'surface', tags: ['3d'] },
                { id: 'g2', name: 'Paraboloid', eq: 'x^2 + y^2', latex: 'z = x^2 + y^2', type: 'surface', tags: ['3d', 'cup'] },
                { id: 'g3', name: 'Saddle', eq: 'x^2 - y^2', latex: 'z = x^2 - y^2', type: 'surface', tags: ['3d', 'hyperbolic'] },
                { id: 'g4', name: 'Ripple', eq: 'sin(sqrt(x^2 + y^2))', latex: 'z = \\sin(\\sqrt{x^2+y^2})', type: 'surface', tags: ['wave'] }
            ],
            physics: [
                { id: 'p1', name: 'Projectile Motion', eq: 'x * tan(45deg) - (9.8 * x^2) / (2 * 20^2 * cos(45deg)^2)', latex: 'y = x\\tan\\theta - \\frac{gx^2}{2u^2\\cos^2\\theta}', tags: ['kinematics'] },
                { id: 'p2', name: 'SHM Potential', eq: '0.5 * k * x^2', latex: 'U = \\frac{1}{2}kx^2', tags: ['energy'] }
            ]
        };

        const { useState, useEffect, useRef, useMemo } = React;

                    /* --- ENGINE 1: SONIC FEEDBACK SYSTEM --- */
        const useSonicSystem = () => {
            const ctxRef = useRef(null);
            
            const playSound = (type) => {
                if (!ctxRef.current) {
                    const AudioContext = window.AudioContext || window.webkitAudioContext;
                    ctxRef.current = new AudioContext();
                }
                const ctx = ctxRef.current;
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.connect(gain);
                gain.connect(ctx.destination);
                const t = ctx.currentTime;

                if (type === 'hover') {
                    osc.type = 'sine';
                    osc.frequency.setValueAtTime(800, t);
                    gain.gain.setValueAtTime(0.02, t);
                    gain.gain.exponentialRampToValueAtTime(0.001, t + 0.05);
                    osc.start(t);
                    osc.stop(t + 0.05);
                } else if (type === 'activate') {
                    osc.type = 'triangle';
                    osc.frequency.setValueAtTime(200, t);
                    osc.frequency.linearRampToValueAtTime(800, t + 0.2);
                    gain.gain.setValueAtTime(0.05, t);
                    gain.gain.linearRampToValueAtTime(0, t + 0.2);
                    osc.start(t);
                    osc.stop(t + 0.2);
                }
            };
            return { playSound };
        };

        /* --- ENGINE 2: GRAPHING KERNEL --- */
        const GraphKernel = ({ equation, mode, showGrid, showTangent }) => {
            const containerRef = useRef(null);

            useEffect(() => {
                if (!containerRef.current) return;
                
                // Color palette based on equation hash
                let hue = 0;
                for(let i=0; i<equation.length; i++) hue += equation.charCodeAt(i);
                const accentColor = `hsl(${hue % 360}, 100%, 60%)`;

                let data = [];
                let layout = {
                    autosize: true,
                    paper_bgcolor: 'rgba(0,0,0,0)',
                    plot_bgcolor: 'rgba(0,0,0,0)',
                    font: { family: 'Outfit', color: '#8899ac' },
                    margin: { l: 30, r: 30, b: 30, t: 30 },
                    showlegend: false,
                    xaxis: { 
                        showgrid: showGrid, 
                        zeroline: true, 
                        gridcolor: '#1e293b', 
                        zerolinecolor: accentColor 
                    },
                    yaxis: { 
                        showgrid: showGrid, 
                        zeroline: true, 
                        gridcolor: '#1e293b', 
                        zerolinecolor: accentColor 
                    }
                };

                try {
                    const expr = math.compile(equation);
                    
                    if (mode === '3D') {
                        const range = math.range(-10, 10, 0.5).toArray();
                        const zData = [];
                        range.forEach(y => {
                            const row = [];
                            range.forEach(x => {
                                try { row.push(expr.evaluate({x, y})); } catch { row.push(0); }
                            });
                            zData.push(row);
                        });
                        
                        data = [{
                            type: 'surface',
                            z: zData, x: range, y: range,
                            colorscale: [[0, '#000000'], [1, accentColor]],
                            opacity: 0.9,
                            showscale: false
                        }];
                        layout.scene = {
                            xaxis: {gridcolor: '#333'}, yaxis: {gridcolor: '#333'}, zaxis: {gridcolor: '#333'},
                            bgcolor: 'rgba(0,0,0,0)'
                        };
                    } else {
                        const xRange = math.range(-15, 15, 0.1).toArray();
                        const yRange = xRange.map(x => {
                            try { return expr.evaluate({x}); } catch { return null; }
                        });
                        
                        data = [{
                            x: xRange, y: yRange,
                            type: 'scatter',
                            mode: 'lines',
                            line: { color: accentColor, width: 3, shape: 'spline' },
                            fill: 'tozeroy',
                            fillcolor: accentColor + '10'
                        }];
                    }

                    Plotly.react(containerRef.current, data, layout, {displayModeBar: false, responsive: true});
                } catch (err) { /* Silent fail for invalid inputs */ }

            }, [equation, mode, showGrid, showTangent]);

            return <div ref={containerRef} className="w-full h-full absolute inset-0" />;
        };

                    /* --- COMPONENT: THE UNIVERSAL NEXUS (Formula Library) --- */
        const KnowledgeNexus = ({ isOpen, onClose, onSelect }) => {
            const [category, setCategory] = useState('algebra');
            const [search, setSearch] = useState('');

            if (!isOpen) return null;

            // Filter logic
            const allFormulas = Object.entries(UNIVERSAL_DATABASE).flatMap(([cat, items]) => items.map(i => ({...i, cat})));
            const displayItems = search 
                ? allFormulas.filter(i => i.name.toLowerCase().includes(search.toLowerCase()) || i.tags.join('').includes(search.toLowerCase()))
                : UNIVERSAL_DATABASE[category];

            return (
                <div className="absolute top-20 left-4 bottom-24 w-80 glass-panel rounded-2xl z-40 flex flex-col overflow-hidden animate-fade-in-right border-l-4 border-accent-cyan">
                    {/* Header */}
                    <div className="p-4 border-b border-white/10 bg-nebula">
                        <h2 className="font-cyber text-accent-cyan text-lg tracking-wider">NEXUS DB</h2>
                        <div className="relative mt-2">
                            <i className="fas fa-search absolute left-3 top-2.5 text-gray-500 text-xs"></i>
                            <input 
                                type="text" 
                                placeholder="Search the universe..." 
                                className="w-full bg-void border border-white/10 rounded-full py-1.5 pl-8 text-xs text-white focus:border-accent-cyan outline-none transition-colors"
                                value={search}
                                onChange={e => setSearch(e.target.value)}
                            />
                        </div>
                    </div>

                    {/* Categories (Sidebar within Sidebar) */}
                    {!search && (
                        <div className="flex overflow-x-auto p-2 gap-2 border-b border-white/10 scrollbar-hide">
                            {Object.keys(UNIVERSAL_DATABASE).map(cat => (
                                <button 
                                    key={cat} 
                                    onClick={() => setCategory(cat)}
                                    className={`px-3 py-1 rounded text-xs font-mono uppercase transition-colors ${category === cat ? 'bg-accent-cyan text-black' : 'text-gray-400 hover:text-white'}`}
                                >
                                    {cat}
                                </button>
                            ))}
                        </div>
                    )}

                    {/* List */}
                    <div className="flex-1 overflow-y-auto p-2 space-y-2">
                        {displayItems.map(item => (
                            <div 
                                key={item.id} 
                                onClick={() => { onSelect(item.eq, item.type === 'surface' ? '3D' : '2D'); }}
                                className="p-3 rounded-lg bg-white/5 hover:bg-white/10 border border-transparent hover:border-accent-cyan cursor-pointer group transition-all"
                            >
                                <div className="flex justify-between items-start">
                                    <span className="text-sm font-semibold text-gray-200 group-hover:text-white">{item.name}</span>
                                    <span className="text-[10px] text-gray-500 bg-black px-1 rounded">{item.cat || category}</span>
                                </div>
                                <div className="mt-1 font-mono text-xs text-accent-cyan opacity-80" dangerouslySetInnerHTML={{__html: katex.renderToString(item.latex)}}></div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        /* --- COMPONENT: MATRIX ENGINE (New Feature) --- */
        const MatrixEngine = ({ isOpen, onClose }) => {
            if (!isOpen) return null;
            const [matrix, setMatrix] = useState([[1, 2, 3], [0, 1, 4], [5, 6, 0]]);
            const [result, setResult] = useState(null);

            const updateCell = (r, c, val) => {
                const newM = [...matrix];
                newM[r][c] = parseFloat(val) || 0;
                setMatrix(newM);
            };

            const calculate = (type) => {
                try {
                    if (type === 'det') setResult(`Determinant: ${math.det(matrix)}`);
                    if (type === 'inv') setResult(`Inverse: ${JSON.stringify(math.inv(matrix))}`);
                    if (type === 'trace') setResult(`Trace: ${math.trace(matrix)}`);
                } catch (e) { setResult("Error: Singular Matrix or Invalid Input"); }
            };

            return (
                <div className="absolute center-abs w-[400px] glass-panel rounded-2xl p-6 z-50">
                    <div className="flex justify-between items-center mb-4">
                        <h3 className="font-cyber text-accent-magenta">MATRIX CORE [3x3]</h3>
                        <button onClick={onClose} className="text-gray-400 hover:text-white"><i className="fas fa-times"></i></button>
                    </div>
                    
                    <div className="grid grid-rows-3 gap-2 mb-4 bg-black/30 p-4 rounded-xl border border-white/5">
                        {matrix.map((row, r) => (
                            <div key={r} className="grid grid-cols-3 gap-2">
                                {row.map((val, c) => (
                                    <input 
                                        key={`${r}-${c}`}
                                        type="number" 
                                        value={val}
                                        onChange={(e) => updateCell(r, c, e.target.value)}
                                        className="w-full bg-void border border-white/20 rounded text-center py-2 text-white focus:border-accent-magenta outline-none font-mono"
                                    />
                                ))}
                            </div>
                        ))}
                    </div>

                    <div className="grid grid-cols-3 gap-2 mb-4">
                        <button onClick={() => calculate('det')} className="py-2 bg-white/5 hover:bg-accent-magenta hover:text-black rounded transition-colors text-xs font-bold">DET</button>
                        <button onClick={() => calculate('inv')} className="py-2 bg-white/5 hover:bg-accent-magenta hover:text-black rounded transition-colors text-xs font-bold">INVERSE</button>
                        <button onClick={() => calculate('trace')} className="py-2 bg-white/5 hover:bg-accent-magenta hover:text-black rounded transition-colors text-xs font-bold">TRACE</button>
                    </div>

                    {result && (
                        <div className="p-3 bg-accent-magenta/10 border border-accent-magenta/30 rounded text-xs font-mono text-accent-magenta break-all">
                            {result}
                        </div>
                    )}
                </div>
            );
        };

        /* --- COMPONENT: THE NAVIGATION DOCK --- */
        const NavDock = ({ activeTool, setTool, toggleNexus }) => {
            const tools = [
                { id: 'graph', icon: 'fa-chart-area', color: 'text-accent-cyan' },
                { id: 'matrix', icon: 'fa-table-cells', color: 'text-accent-magenta' },
                { id: 'vector', icon: 'fa-location-arrow', color: 'text-accent-gold' },
                { id: 'convert', icon: 'fa-right-left', color: 'text-purple-400' }
            ];

            return (
                <div className="fixed bottom-6 left-1/2 -translate-x-1/2 glass-panel px-6 py-3 rounded-2xl flex items-center gap-6 z-50">
                    <button 
                        onClick={toggleNexus}
                        className="w-10 h-10 rounded-xl bg-white/5 hover:bg-accent-cyan hover:text-black transition-all flex items-center justify-center text-gray-300"
                        title="Open Knowledge Nexus"
                    >
                        <i className="fas fa-book-journal-whills text-lg"></i>
                    </button>
                    
                    <div className="w-px h-8 bg-white/10"></div>

                    {tools.map(tool => (
                        <button 
                            key={tool.id}
                            onClick={() => setTool(tool.id)}
                            className={`flex flex-col items-center gap-1 group relative ${activeTool === tool.id ? 'opacity-100' : 'opacity-50 hover:opacity-100'}`}
                        >
                            <div className={`text-2xl transition-transform group-hover:-translate-y-2 duration-300 ${tool.color} drop-shadow-lg`}>
                                <i className={`fas ${tool.icon}`}></i>
                            </div>
                            <span className="text-[10px] font-mono opacity-0 group-hover:opacity-100 absolute -top-8 bg-black px-2 py-0.5 rounded border border-white/10 transition-opacity">
                                {tool.id.toUpperCase()}
                            </span>
                            {activeTool === tool.id && <div className="w-1 h-1 rounded-full bg-white absolute -bottom-2"></div>}
                        </button>
                    ))}
                </div>
            );
        };

                    /* --- MAIN APP ORCHESTRATOR --- */
        const App = () => {
            // State
            const [mode, setMode] = useState('2D');
            const [equation, setEquation] = useState('sin(x) * x');
            const [tool, setTool] = useState('graph'); // graph, matrix, vector...
            const [nexusOpen, setNexusOpen] = useState(false);
            const [showGrid, setShowGrid] = useState(true);
            const [showSettings, setShowSettings] = useState(false);
            const [founderOpen, setFounderOpen] = useState(false);

            // Hooks
            const { playSound } = useSonicSystem();

            // Handlers
            const handleFormulaSelect = (eq, newMode) => {
                setEquation(eq);
                setMode(newMode);
                playSound('activate');
                setTool('graph'); // Force switch to graph
            };

            return (
                <div className="w-full h-full relative font-sans text-white">
                    
                    {/* --- HEADER --- */}
                    <header className="absolute top-0 w-full p-6 flex justify-between items-center z-40 pointer-events-none">
                        <div className="flex items-center gap-4 pointer-events-auto cursor-pointer" onClick={() => window.location.reload()}>
                            <div className="relative w-12 h-12 flex items-center justify-center">
                                <div className="absolute inset-0 border-2 border-dashed border-accent-cyan rounded-full animate-spin-slow"></div>
                                <div className="absolute inset-2 border-2 border-accent-magenta rounded-full animate-ping opacity-20"></div>
                                <span className="font-cyber font-bold text-xl text-white">S</span>
                            </div>
                            <div>
                                <h1 className="font-cyber font-bold text-lg tracking-[0.2em]">STUDYGRAPHS</h1>
                                <div className="flex items-center gap-2">
                                    <span className="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"></span>
                                    <p className="text-[10px] font-mono text-gray-400">INDIA // SYSTEM V3.0</p>
                                </div>
                            </div>
                        </div>

                        <div className="flex gap-4 pointer-events-auto">
                            <button 
                                onClick={() => setFounderOpen(true)}
                                className="px-4 py-1.5 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 hover:border-accent-cyan transition-all text-xs font-mono"
                            >
                                <i className="fas fa-code mr-2"></i>DEV_INFO
                            </button>
                            <button 
                                onClick={() => setShowSettings(!showSettings)}
                                className={`w-8 h-8 rounded-full border border-white/10 flex items-center justify-center transition-all ${showSettings ? 'bg-accent-cyan text-black' : 'hover:bg-white/10'}`}
                            >
                                <i className="fas fa-cog"></i>
                            </button>
                        </div>
                    </header>

                    {/* --- MAIN VIEWPORT --- */}
                    <main className="absolute inset-0 z-0">
                        {tool === 'graph' && (
                            <GraphKernel equation={equation} mode={mode} showGrid={showGrid} />
                        )}
                        {/* Placeholder for other tools if expanded later */}
                        {tool === 'vector' && (
                            <div className="center-abs text-center glass-panel p-8 rounded-2xl">
                                <i className="fas fa-drafting-compass text-4xl text-accent-gold mb-4"></i>
                                <h2 className="font-cyber text-xl">VECTOR LAB</h2>
                                <p className="text-gray-400 text-sm mt-2">Initialize modules...</p>
                            </div>
                        )}
                    </main>

                    {/* --- INPUT COMMAND CENTER --- */}
                    {tool === 'graph' && (
                        <div className="absolute top-24 left-1/2 -translate-x-1/2 w-[90%] max-w-2xl z-30">
                            <div className="glass-panel rounded-full p-2 flex items-center gap-4 transition-all hover:border-accent-cyan/50 shadow-[0_0_30px_rgba(0,243,255,0.1)]">
                                {/* Mode Toggles */}
                                <div className="flex bg-black/40 rounded-full p-1 ml-1">
                                    <button 
                                        onClick={() => setMode('2D')}
                                        className={`px-4 py-1 rounded-full text-xs font-bold transition-all ${mode === '2D' ? 'bg-accent-cyan text-black shadow-lg' : 'text-gray-500 hover:text-white'}`}
                                    >2D</button>
                                    <button 
                                        onClick={() => setMode('3D')}
                                        className={`px-4 py-1 rounded-full text-xs font-bold transition-all ${mode === '3D' ? 'bg-accent-magenta text-black shadow-lg' : 'text-gray-500 hover:text-white'}`}
                                    >3D</button>
                                </div>

                                {/* The Input */}
                                <div className="flex-1 relative group">
                                    <span className="absolute left-2 top-1/2 -translate-y-1/2 font-mono text-gray-500 text-sm">f(x)=</span>
                                    <input 
                                        type="text" 
                                        value={equation}
                                        onChange={(e) => setEquation(e.target.value)}
                                        className="w-full bg-transparent border-none outline-none text-lg font-mono text-white pl-12 placeholder-gray-700"
                                        spellCheck="false"
                                    />
                                </div>

                                {/* Action */}
                                <button className="w-10 h-10 rounded-full bg-white/10 hover:bg-white text-white hover:text-black flex items-center justify-center transition-all mr-1">
                                    <i className="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                    )}

                    {/* --- SETTINGS DRAWER --- */}
                    {showSettings && (
                        <div className="absolute top-20 right-6 w-64 glass-panel rounded-2xl p-4 z-40 animate-fade-in-down">
                            <h3 className="font-cyber text-xs text-gray-400 mb-3 border-b border-white/10 pb-2">VIEWPORT SETTINGS</h3>
                            <div className="space-y-3">
                                <label className="flex justify-between items-center cursor-pointer group">
                                    <span className="text-sm group-hover:text-accent-cyan">Show Grid</span>
                                    <div 
                                        onClick={() => setShowGrid(!showGrid)}
                                        className={`w-10 h-5 rounded-full relative transition-colors ${showGrid ? 'bg-accent-cyan' : 'bg-white/10'}`}
                                    >
                                        <div className={`absolute top-1 w-3 h-3 bg-black rounded-full transition-all ${showGrid ? 'left-6' : 'left-1'}`}></div>
                                    </div>
                                </label>
                                <button className="w-full py-2 bg-white/5 hover:bg-red-500/20 text-xs text-red-400 rounded border border-transparent hover:border-red-500 transition-all">
                                    Reset Viewport
                                </button>
                            </div>
                        </div>
                    )}

                    {/* --- MODULES --- */}
                    <KnowledgeNexus 
                        isOpen={nexusOpen} 
                        onClose={() => setNexusOpen(false)} 
                        onSelect={handleFormulaSelect} 
                    />
                    
                    <MatrixEngine 
                        isOpen={tool === 'matrix'} 
                        onClose={() => setTool('graph')} 
                    />

                    {/* --- FOUNDER INFO --- */}
                    {founderOpen && (
                        <div className="fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-md animate-fade-in">
                            <div className="glass-panel w-full max-w-md rounded-3xl p-8 relative text-center border-t-2 border-accent-cyan">
                                <button onClick={() => setFounderOpen(false)} className="absolute top-4 right-4 text-gray-400 hover:text-white"><i className="fas fa-times"></i></button>
                                <div className="w-24 h-24 mx-auto rounded-full bg-gradient-to-b from-accent-cyan to-accent-magenta p-[2px] mb-4">
                                    <div className="w-full h-full rounded-full bg-black flex items-center justify-center overflow-hidden">
                                        <i className="fas fa-user-astronaut text-4xl text-white"></i>
                                    </div>
                                </div>
                                <h2 className="font-cyber text-2xl text-white">SHASHANK KUSHWAHA</h2>
                                <p className="font-mono text-accent-cyan text-xs mb-4">ARCHITECT // UNNAO, UP</p>
                                <p className="text-gray-400 text-sm leading-relaxed mb-6">
                                    StudyGraphs India v3.0 is a pure visualization engine designed to make mathematics accessible to every student in India. 
                                </p>
                                <div className="flex justify-center gap-4">
                                    <a href="mailto:return7521@gmail.com" className="px-4 py-2 rounded bg-white/5 hover:bg-white/20 text-sm transition-all border border-white/10">Email</a>
                                    <a href="#" className="px-4 py-2 rounded bg-white/5 hover:bg-white/20 text-sm transition-all border border-white/10">Instagram</a>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* --- NAVIGATION DOCK --- */}
                    <NavDock 
                        activeTool={tool} 
                        setTool={(t) => { setTool(t); playSound('hover'); }} 
                        toggleNexus={() => { setNexusOpen(!nexusOpen); playSound('hover'); }}
                    />

                </div>
            );
        };

        /* --- BOOTSTRAP --- */
        const root = ReactDOM.createRoot(document.getElementById('app-mount'));
        root.render(<App />);

        /* --- BACKGROUND STARFIELD --- */
        const initStars = () => {
            const canvas = document.getElementById('starfield');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const stars = Array(200).fill().map(() => ({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                size: Math.random() * 2,
                speed: Math.random() * 0.5
            }));

            function animate() {
                ctx.fillStyle = '#050505';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#ffffff';
                
                stars.forEach(star => {
                    ctx.globalAlpha = Math.random() * 0.5 + 0.5;
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                    ctx.fill();
                    star.y -= star.speed;
                    if (star.y < 0) star.y = canvas.height;
                });
                requestAnimationFrame(animate);
            }
            animate();
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        };
        window.onload = initStars;

    </script>
</body>
</html>
